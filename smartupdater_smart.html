<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"> <head>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.1/jquery.js"></script>
<script type="text/javascript" src="smartupdater.js"></script>

<link rel="stylesheet" type="text/css" href="smartupdater.css" media="screen" />
<title>Smartupdater - jQuery periodical updater</title>
</head>
<body>

<h1>Smartupdater </h1>
<div style="text-align:center;text-size:75%"> 
&nbsp;&nbsp;|&nbsp;&nbsp;
<a href="smartupdater_home.html">Home</a>&nbsp;&nbsp;|&nbsp;&nbsp;
<a href="smartupdater_basic.html">Basic</a>&nbsp;&nbsp;|&nbsp;&nbsp;
<a href="smartupdater_stop.html">Stop / Restart</a>&nbsp;&nbsp;|&nbsp;&nbsp;
<a href="smartupdater_timeout.html">Programmable Timeout</a>&nbsp;&nbsp;|&nbsp;&nbsp;
<a href="smartupdater_smart.html">Smart Updating </a>&nbsp;&nbsp;|&nbsp;&nbsp;
<a href="smartupdater_remote.html">Remote Control</a>&nbsp;&nbsp;|&nbsp;&nbsp;
<a href="https://code.google.com/p/smartupdater/downloads/list" target="_blank">
Download</a>&nbsp;&nbsp;|&nbsp;&nbsp;
<a href="http://vadimkir.blogspot.com/2010/08/smartupdater-periodical-updater.html" target="_blank">
Blog</a>
</div>
<hr/>

<h2>Smart Updating&nbsp;&nbsp;/&nbsp;&nbsp;Multiplying Interval</h2>

<div class="leftpanel">
<div>Time on server: <span class="su"  id='example1'></span></div>
<div>Smartpdater State: <span class="su"  id="statusSU"></span></div>
<div>Smartpdater Timeout: <span class="su" id="timeoutSU"></span></div>
<br/>

<input id="stopSU" onclick='$("#example1").smartupdaterStop();' title="click to Stop" type="button" value="Stop">
<input  id="restartSU" onclick='$("#example1").smartupdaterRestart();' title="reset poll interval to minTimeout and restart polling" type="button" value="Restart" />&nbsp; &nbsp; &nbsp;
<input  id="cleartime" onclick='$("#example1").text("---I am a placeholder---");' title="replace data with placeholder" type="button" value="Clear data" />
<br/>
<br/>


<p><div class="code"><code>	
$("#example1").smartupdater({<br/>
&nbsp;&nbsp;			url : 'getmin.php',<br/>
&nbsp;&nbsp;			multiplier: 2,<br/>
&nbsp;&nbsp;			minTimeout: 1000 // 1 second<br/>
&nbsp;&nbsp;			}, function (data) {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;				$("#example1").html(data);<br/>
&nbsp;&nbsp;			}<br/>
		);<br/>
</code></div></p>

<p>
<div class="code">
<code>
$("#example1").smartupdaterStop();<br/><br/>
$("#example1").smartupdaterRestart();<br/><br/>
$("#example1")[0].smartupdaterStatus.state<br/><br/>
$("#example1")[0].smartupdaterStatus.timeout

</code></div></p>

</div> <!-- leftpanel-->
<div class="rightpanel">


<!--p class="comments"--->
<h4>Smart Updating</h4>
<p>
As returned data is the same within several polling cycles, Smartupdater doesn't update 
the data in browser. Click <b>"Clear data"</b> button 
and see, that view is updated only once in a minute, not on every cycle.
</p>

<h4>Multiplying Interval</h4>
<p>
Option <code>multiplier</code>" is set to "2" (it's default, I added the line only for demo purpose), 
so each time server returns not modified data,
Smartupdater doubles it's polling period (in this example minTimeout is set 1 sec). 
Within 1 minute it is: 
2 sec, 4 sec, 8 sec, 16 sec, 32 sec. Then data is changed and Smartupdater set polling 
period to "minTimeout".<br/><br/>
"multiplier" can be set not only as integer, but as a fractional number, say, 1.25 or 2.5
<br/><br/>
To disable this feature, set <code>"multiplier : 1"</code>

</p>


</div><!--rightpanel-->
<br clear="all"/>
<hr/>

<div style="text-align:center;color:#999999;font-size:70%;">
&copy;2010 Vadim Kiryukhin </div>

<script type="text/javascript">
$(document).ready(function()
{ 
		$("#example1").smartupdater({
			url : 'getmin.php',
			multiplier: 2,
			minTimeout: 1000 // 1 seconds
			}, function (data) {
				$("#example1").html(data);
			}
		);
		
		//Let's check Smartupdater status every 1 second
		setInterval('$("#statusSU").html($("#example1")[0].smartupdaterStatus.state)',1000);
		setInterval('$("#timeoutSU").html($("#example1")[0].smartupdaterStatus.timeout)',1000);
});		

</script>


</body>
</html>
